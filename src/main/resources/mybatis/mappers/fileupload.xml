<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="fileupload">

  <insert id="addFile" parameterType="fileupload">
   <![CDATA[
    insert into file_upload values(null, #{chatRoomNo}, #{participantNo }, #{url }, now())
    ]]>
        <selectKey keyProperty="no" order="AFTER" resultType="Long">
            select last_insert_id()
        </selectKey>
  </insert>

  <select id="getFileList" parameterType="Long" resultType="fileupload">
  <![CDATA[
    select no, url, created_at as createdAt
    from file_upload
    where chat_room_no =  #{value }
    order by no desc
  ]]>
  </select>
</mapper>